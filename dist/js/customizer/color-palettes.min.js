!function(n){var o={};function s(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=n,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=2)}([function(e,t){e.exports=lodash},function(e,t){e.exports=jQuery},function(e,t,n){"use strict";n.r(t);var t=n(0),C=n.n(t),t=n(1),j=n.n(t),S=()=>{const n=[];return C.a.each(customify.colorPalettes.masterSettingIds,function(e){const t=wp.customize(e);e=t();n.push(e)}),n};function a(e,t,n){let o,s,i;var c;return 0==t?o=s=i=n:(c=function(e,t,n){return n<0&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},t=2*n-(n=n<.5?n*(1+t):n+t-n*t),o=c(t,n,e+1/3),s=c(t,n,e),i=c(t,n,e-1/3)),[Math.round(255*o),Math.round(255*s),Math.round(255*i)]}function r(e,t,n,o){return t[e]*(1-o)+n[e]*o}function l(e,t,n){return e*(1-n)+t*n}function d(e){return f(a(e.hue,e.saturation,e.lightness))}function u(e){let t=0,n=0,o=0,s=0;/^#([A-Fa-f0-9]{3,4}){1,2}$/.test(e)&&(3===(e=e.substring(1).split("")).length&&(e=[e[0],e[0],e[1],e[1],e[2],e[2],"F","F"]),4===e.length&&(e=[e[0],e[0],e[1],e[1],e[2],e[2],e[3],e[3]]),t=parseInt([e[0],e[1]].join(""),16),n=parseInt([e[2],e[3]].join(""),16),o=parseInt([e[4],e[5]].join(""),16),s=parseInt([e[6],e[7]].join(""),16));e=_(t,n,o);return{red:t,green:n,blue:o,alpha:s,hue:e[0],saturation:e[1],lightness:e[2],luma:.2126*t+.7152*n+.0722*o}}const o=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function s(e){return isNaN(e)?"00":o[(e-e%16)/16]+o[e%16]}function f(e){return"#"+s(e[0])+s(e[1])+s(e[2])}function _(e,t,n){e/=255,t/=255,n/=255;var o=Math.max(e,t,n),s=Math.min(e,t,n);let i,c,a=(o+s)/2;if(o==s)i=c=0;else{var r=o-s;switch(c=.5<a?r/(2-o-s):r/(o+s),o){case e:i=(t-n)/r+(t<n?6:0);break;case t:i=(n-e)/r+2;break;case n:i=(e-t)/r+4}i/=6}return[i,c,a]}var w=(e,t)=>{t=void 0===t?j()('[name*="sm_palette_filter"]:checked').val():t;let n=u(e);var o,s,i,c=S();if("vivid"===t)return n=a(n.hue,l(n.saturation,1,.5),n.lightness),f(n);if("warm"===t&&e!==c[0]){let e=u("#704214");return e.saturation=r("saturation",e,n,1),e.lightness=r("lightness",e,n,1),e=u(d(e)),n.saturation=.75*n.saturation,n=u(d(n)),n=(o=n,s=e,i=(i=.75)||.5,o.red=parseInt(s.red*i+o.red*(1-i),10),o.green=parseInt(s.green*i+o.green*(1-i),10),o.blue=parseInt(s.blue*i+o.blue*(1-i),10),u(f([o.red,o.green,o.blue]))),n.lightness=r("lightness",n,u(.5<n.lightness?"#FFF":"#000"),.2),d(n)}if("softer"===t)return n.saturation=r("saturation",n,u("#FFF"),.3),n.lightness=r("lightness",n,u("#FFF"),.1),d(n);if("pastel"===t)return n.saturation=r("saturation",n,u("#FFF"),.6),n.lightness=r("lightness",n,u("#FFF"),.2),d(n);if("greyish"===t)return n=a(n.hue,l(n.saturation,0,.8),n.lightness),f(n);if("clarendon"===t)return e===c[0]||e===c[1]||e===c[2]?(n=a(n.hue,l(n.saturation,1,.3),n.lightness),f(n)):(e!==c[3]&&e!==c[4]&&e!==c[5]||(n.lightness=r("lightness",n,u("#000"),.4)),e!==c[6]&&e!==c[7]&&e!==c[8]||(n.lightness=r("lightness",n,u("#FFF"),.4)),d(n));if("cold"!==t||e===c[0])return"dumb"===t?(e===c[1]||e===c[2]?(n=u(c[0]),n.lightness=r("lightness",n,u("#000"),.2),n.saturation=r("saturation",n,u("#000"),.2),e===c[2]&&(n.lightness=r("lightness",n,u("#000"),.2),n.saturation=r("saturation",n,u("#000"),.2))):n.hue=u(c[0]).hue,d(n)):"mayfair"===t?(e===c[1]||e===c[2]?(n=u(c[0]),n.hue=(n.hue+.05)%1,e===c[2]&&(n.hue=(n.hue+.05)%1)):n.hue=u(c[0]).hue,d(n)):"sierra"===t?(e===c[1]||e===c[2]?(n=u(c[0]),n.hue=(n.hue+.95)%1,e===c[2]&&(n.hue=(n.hue+.95)%1)):n.hue=u(c[0]).hue,d(n)):e;n.saturation=r("saturation",n,u("#FFF"),.4),n.hue=(n.hue-.55)/18+.55,n=u(d(n));e=_(n.red,n.green,n.blue);return n.hue=e[0],n.saturation=l(e[1],1,.1),n.lightness=r("lightness",n,u(.5<n.lightness?"#FFF":"#000"),.2),d(n)};window.customify=window.customify||parent.customify||{};var O=["sm_accent_color_switch_master","sm_accent_color_select_master","sm_text_color_switch_master","sm_text_color_select_master"];const U="#_customize-input-sm_dark_color_switch_slider_control",x="#_customize-input-sm_dark_color_select_slider_control",I="#_customize-input-sm_dark_color_primary_slider_control",M="#_customize-input-sm_dark_color_secondary_slider_control",z="#_customize-input-sm_dark_color_tertiary_slider_control";var N="light";void 0===customify.colorPalettes&&(customify.colorPalettes={}),C.a.extend(customify.colorPalettes,function(){const d=wp.customize;let l;const u={};var n=[U,x,I,M,z].join(", ");let e=!1;var o=()=>{C.a.each(customify.colorPalettes.masterSettingIds,function(e){const t=d(e);var n;void 0!==t&&(n=t(),u[e]=w(n))})};const c=e=>u[e];function t(){var e=customify.colorPalettes.masterSettingIds.concat(O);C.a.each(e,function(e){if(void 0!==l[e]){var t=l[e];const n=d(e);C.a.isUndefined(t.connected_fields)||(customify.colorPalettes.connectedFieldsCallbacks[e]=(s=t,i=e,function(e,t){var n=C.a.includes(O,i)?e:c(i);C.a.each(s.connected_fields,function(e){if(!C.a.isUndefined(e)&&!C.a.isUndefined(e.setting_id)&&C.a.isString(e.setting_id)){const t=d(e.setting_id);C.a.isUndefined(t)||t.set(n)}}),P();e=i+"_final";const o=d(e);C.a.isUndefined(o)||(C.a.isUndefined(s.connected_fields)||C.a.isEmpty(s.connected_fields)?o.set(""):o.set(n))}),n.bind(customify.colorPalettes.connectedFieldsCallbacks[e]),C.a.each(t.connected_fields,function(e){e=e.setting_id;const t=d(e);void 0!==t&&(customify.colorPalettes.connectedFieldsCallbacks[e]=a,t.bind(customify.colorPalettes.connectedFieldsCallbacks[e]))}))}var s,i})}function s(){C.a.each(customify.colorPalettes.connectedFieldsCallbacks,function(e,t){const n=d(t);n.unbind(e)}),customify.colorPalettes.connectedFieldsCallbacks={}}var f=e=>customify.colorPalettes.variations.hasOwnProperty(e)?customify.colorPalettes.variations[e]:N;const _=function(){C.a.each(customify.colorPalettes.masterSettingIds,function(e){j()(".c-color-palette").find(".sm-color-palette__color."+e).css("color",c(e))})},m=function(){C.a.each(customify.colorPalettes.masterSettingIds,function(e){const t=d(e);var n=t();j()(".c-color-palette").find(".sm-color-palette__color."+e).css("color",n)})};const h=C.a.debounce(()=>{let n=j()();C.a.each(customify.colorPalettes.masterSettingIds,function(e){void 0!==l[e]&&(e=l[e],C.a.isUndefined(e.connected_fields)||C.a.each(e.connected_fields,function(e){const t=e.setting_id;e=t.match(/\[(.*?)\]/);e&&(e=e[1],e=j()(".customize-control-color").filter('[id*="'+e+'"]').find(".wp-color-picker"),n=n.add(e))}))}),n.iris({palettes:S()})},30),a=C.a.debounce(()=>{const n=[];let e;C.a.each(customify.colorPalettes.masterSettingIds,function(e){let t=l[e].connected_fields;var o=d(e)();let s=!1;C.a.isUndefined(t)||Array.isArray(t)||(t=Object.keys(t).map(function(e){return t[e]})),!C.a.isUndefined(t)&&t.length&&(C.a.each(t,function(e){e=e.setting_id;const t=d(e);if(void 0!==t){const n=t();"string"==typeof n&&n.toLowerCase()!==w(o).toLowerCase()&&(s=!0)}}),s&&n.push(e))}),e="."+n.join(", ."),j()(".c-color-palette .color").removeClass("altered"),n.length&&j()(".c-color-palette .color").filter(e).addClass("altered")},30),i=C.a.debounce(()=>{const n=[];let e;C.a.each(customify.colorPalettes.masterSettingIds,function(e){var t=l[e].connected_fields;C.a.isUndefined(t)||C.a.isEmpty(t)||n.push(e)}),e=C.a.isEmpty(n)?"*":"."+n.join(", ."),j()(".sm-palette-filter .color").addClass("hidden").filter(e).removeClass("hidden"),j()(".sm-color-palette__color").addClass("hidden").filter(e).removeClass("hidden"),j()(".js-color-palette .palette__item").addClass("hidden").filter(e).removeClass("hidden")},30);var r=()=>{a(),i(),h(),_()},v=(e,t)=>{const o=JSON.parse(JSON.stringify(e)),s=JSON.parse(JSON.stringify(e));return C.a.each(t,function(e,t){if(void 0!==o[t]){let n=[];e instanceof Array&&C.a.each(e,function(e){let t;C.a.isUndefined(s[e].connected_fields)&&(s[e].connected_fields=[]),t=Object.values(s[e].connected_fields),n=n.concat(t)}),o[t].connected_fields=Object.keys(n).map(function(e){return n[e]})}}),C.a.clone(o)},p=(e,n,o,s)=>{const i=C.a.clone(e);if(!C.a.isUndefined(i[o])&&!C.a.isUndefined(i[n])){C.a.isUndefined(i[n].connected_fields)&&(i[n].connected_fields=[]),C.a.isUndefined(i[o].connected_fields)&&(i[o].connected_fields=[]);e=Object.values(i[n].connected_fields);const c=Object.values(i[o].connected_fields),a=c.concat(e);s=Math.round(s*a.length);let t=a.slice(0,s);s=a.slice(s);t=Object.keys(t).map(function(e){return t[e]}),t=Object.keys(t).map(function(e){return t[e]}),i[o].connected_fields=t,i[n].connected_fields=s}return i},g=()=>{let t=JSON.parse(JSON.stringify(customify.settingsClone));const e=j()('[name*="sm_color_diversity"]');var n=j()('[name*="sm_coloration_level"]'),o=!!e.length,s=void 0!==e.filter(":checked").data("default"),i=!o||s,c=!!n.length,a=void 0!==j()('[name*="sm_coloration_level"]:checked').data("default"),s=!c||a,n=o?j()('[name*="sm_color_diversity"]:checked').val():d("sm_color_diversity")();i&&s||(c=j()(U).val()/100,a=j()(x).val()/100,o=j()(I).val()/100,i=j()(M).val()/100,s=j()(z).val()/100,t=p(t,"sm_dark_primary","sm_color_primary",o),t=p(t,"sm_dark_secondary","sm_color_secondary",i),t=p(t,"sm_dark_tertiary","sm_color_tertiary",s),t=p(t,"sm_text_color_switch_master","sm_accent_color_switch_master",c),t=p(t,"sm_text_color_select_master","sm_accent_color_select_master",a),a=f("color_diversity_low"),t=v(t,a),"medium"===n&&(t=p(t,"sm_color_primary","sm_color_secondary",.5)),"high"===n&&(t=p(t,"sm_color_primary","sm_color_secondary",.67),t=p(t,"sm_color_secondary","sm_color_tertiary",.5)));n=j()('[name*="sm_shuffle_colors"]:checked').val();"default"!==n&&(n=f("shuffle_"+n),t=v(t,n)),"on"===j()('[name*="sm_dark_mode_control"]:checked').val()&&(r=f("dark"),t=v(t,r));var r=customify.colorPalettes.masterSettingIds.concat(O);C.a.each(r,function(e){l[e]=t[e]})},y=()=>{var e,t=j()('[name*="sm_coloration_level"]:checked').val();void 0!==j()('[name*="sm_coloration_level"]:checked').data("default")?(e=["sm_dark_color_primary_slider","sm_dark_color_secondary_slider","sm_dark_color_tertiary_slider"],C.a.each(e,function(e){var t=customify.config.settings[e];d(e).set(t.default),j()("#_customize-input-"+e+"_control ").val(t.default)})):(t=parseFloat(t),j()(n).val(t)),b()};const b=()=>{var e;g(),s(),t(),r(),e=customify.colorPalettes.masterSettingIds.concat(O),C.a.each(e,function(e){const t=d(e);if(void 0!==t){var n=l[e],o=C.a.includes(O,e)?t():c(e);C.a.each(n.connected_fields,function(e){if(!C.a.isUndefined(e)&&!C.a.isUndefined(e.setting_id)&&C.a.isString(e.setting_id)){const t=d(e.setting_id);C.a.isUndefined(t)||t.set(o)}});e=e+"_final";const s=d(e);C.a.isUndefined(s)||(C.a.isUndefined(n.connected_fields)||C.a.isEmpty(n.connected_fields)?s.set(""):s.set(o))}})},k=e=>{var t=!!j()(".c-color-palette .color.altered").length;let n=!0;return t&&(n=confirm("One or more fields connected to the color palette have been modified. By changing the palette variation you will lose changes to any color made prior to this action.")),!(t&&!n)&&("function"==typeof e&&e(),!0)};var F=()=>{const e=j()(".c-color-palette__control");var t=(()=>{const e=d("sm_color_palette_variation");if(C.a.isUndefined(e))return N;var t=e();return customify.colorPalettes.variations.hasOwnProperty(t)?t:N})();e.removeClass("active"),e.filter(".variation-"+t).addClass("active"),j()(document).on("click",".js-color-palette input",function(e){k(function(){j()(this).trigger("customify:preset-change"),o(),b()}.bind(this))||e.preventDefault()}),j()('[for*="sm_palette_filter"], [for*="sm_coloration_level"], [for*="sm_color_diversity"], [for*="sm_shuffle_colors"], [for*="sm_dark_mode"]').on("click",function(e){k()||e.preventDefault()}),j()(n).on("change",b),j()('[name*="sm_coloration_level"]').on("change",y),j()('[name*="sm_color_diversity"]').on("change",b),j()('[name*="sm_shuffle_colors"]').on("change",b),j()('[name*="sm_dark_mode"]').on("change",b),j()('[name*="sm_palette_filter"]').on("change",()=>{o(),b()})};const P=C.a.debounce(()=>{j()(".sm-palette-filter").each(function(){const e=j()(this).find("input");e.each(function(e,t){const n=j()(t),o=n.next("label");var s=n.val();const i=o.find(".sm-color-palette__color");i.each(function(e,t){const n=j()(t);t=n.data("setting");const o=d(t);t=o();n.css("color",w(t,s))})})})},30);return d.bind("ready",function(){l=d.settings.settings,e||(C.a.each(customify.colorPalettes.masterSettingIds,function(e){u[e]=""}),void 0===customify.settingsClone&&(customify.settingsClone=j.a.extend(!0,{},l)),void 0===customify.colorPalettes.connectedFieldsCallbacks&&(customify.colorPalettes.connectedFieldsCallbacks={}),e=!0),(()=>{const a=j()(".c-color-palette"),r=a.find(".c-color-palette__fields").find("input");if(a.length){const l=a.find(".sm-color-palette__color");l.each((e,t)=>{const i=j()(t);var n,o=i.data("setting");const c=r.filter("."+o),s=d(o);i.data("target",c),i.hasClass("js-no-picker")||(c.iris({change:(e,t)=>{t=t.color.toString();i.css("color",w(t)),u[o]=w(t),s.set(t),"external"!==e.originalEvent.type&&a.find(".sm-color-palette__color."+o).removeClass("altered"),h()}}),i.find(".iris-picker").on("click",function(e){e.stopPropagation(),e.preventDefault()}),n=()=>{l.not(i).each(function(e,t){j()(t).data("target").not(c).hide()}),c.show().focus()},i.on("click",e=>{e.stopPropagation(),e.preventDefault(),c.is(":visible")?(c.iris("hide"),c.hide(),l.removeClass("active inactive")):i.is(".altered")?k(n):n()}),c.on("click",e=>{e.stopPropagation(),e.preventDefault()}),c.on("focus",e=>{l.not(i).addClass("inactive").removeClass("active"),i.addClass("active").removeClass("inactive"),l.not(i).each(function(e,t){j()(t).data("target").iris("hide")});const t=c.next(".iris-picker");var n=a.find(".c-color-palette__colors").outerWidth();const o=l.filter(":visible");var s=o.index(i);t.css("left",(n-200)*s/(o.length-1)),m(),c.iris("show")}),c.on("focusout",e=>{_()}))}),j()("body").on("click",function(){l.removeClass("active inactive"),l.each(function(e,t){const n=j()(t).data("target");j()(t).hasClass("js-no-picker")||n.iris("hide"),n.hide()})})}})(),g(),o(),s(),t(),r(),P(),F()}),{}}())}]);