!function(){window.customify=window.customify||parent.customify||{},function(e,t,n){var i,c,s,o,a,r,l,u,m,d,f,h,p;void 0===t.search&&(t.search={}),_.extend(t.search,(i=n.customize,c="#accordion-section-customify-customizer-search",s="#customify-customizer-search-input",o=null,a=null,r=function(){var n=_.map(i.settings.controls,(function(e,n){if("string"!=typeof n&&(n=String(n)),void 0===_.find(t.search.excludedControls,(function(e){return-1!==n.indexOf(e)}))){var c={label:void 0===e.label||_.isEmpty(e.label)?"":e.label,description:void 0===e.description||_.isEmpty(e.description)?"":e.description,panelName:"",sectionName:"",panel:null,section:e.section};return _.map(i.settings.sections,(function(t,n){e.section===t.id&&_.map(_wpCustomizeSettings.panels,(function(e,n){""===t.panel&&(c.panelName=t.title),t.panel===e.id&&(c.sectionName=t.title,c.panel=t.panel,c.panelName=e.title)}))})),c}})).filter((function(e){return void 0!==e}));a=new Fuse(n,{includeScore:!0,includeMatches:!0,shouldSort:!0,minMatchCharLength:2,threshold:.3,keys:[{name:"label",weight:1},{name:"description",weight:.8},{name:"panelName",weight:.4},{name:"sectionName",weight:.4}]});var c=e("#customize-info");(o=e("#customize-theme-controls")).after('<div id="customify-search-results"></div>'),c.on("keyup",s,(function(t){t.preventDefault();var n=e(s).val();n.length>2?u(n):0===n.length&&p()})),c.on("click",".clear-search",(function(e){p()})),c.on("click",".close-search",(function(e){f()})),c.on("click",".customize-search-toggle",(function(e){f()})),i.previewer.targetWindow.bind(d),i.state("expandedSection").bind(l),i.state("expandedPanel").bind(l)},l=function(){if(!i.state("expandedSection").get()&&!i.state("expandedPanel").get()){var t=e(s).val();t.length>2&&setTimeout((function(){u(t)}),400)}},u=function(n){var i=a.search(n);if(0!==i.length){var c=i.map((function(n,i){if(!_.isEmpty(n.matches)&&""!==n.item.label){var c=e.extend(!0,{},n);_.each(n.matches,(function(e){void 0===e.indices||_.isEmpty(e.indices)||(c.item[e.key]=m(e.value,e.indices))}));var s=c.item.panelName;return""!==c.item.sectionName&&(s="".concat(s," â–¸ ").concat(c.item.sectionName)),'\n                <li id="accordion-section-'.concat(n.item.section,'" class="accordion-section control-section control-section-default customizer-search-results" aria-owns="sub-accordion-section-').concat(n.item.section,'" data-section="').concat(n.item.section,'">\n                    <h3 class="accordion-section-title" tabindex="0">\n                        ').concat(c.item.label,'\n                        <span class="screen-reader-text">').concat(t.l10n.search.resultsSectionScreenReaderText,'</span>\n                    </h3>\n                    <span class="search-setting-path">').concat(s,"</i></span>\n                </li>\n                ")}})).join("");o.addClass("search-found"),document.getElementById("customify-search-results").innerHTML="<ul>".concat(c,"</ul>"),document.querySelectorAll("#customify-search-results .accordion-section").forEach((function(e){return e.addEventListener("click",h)}))}else o.removeClass("search-found")},m=function(e,t){if(!t)return e;for(var n=[],i=t.shift(),c=0;c<e.length;c++){var s=e.charAt(c);i&&c==i[0]&&n.push('<span class="hl">'),n.push(s),i&&c==i[1]&&(n.push("</span>"),i=t.shift())}return n.join("")},d=function(){var t=n.template("customify-search-button");0===e("#customize-info .accordion-section-title .customize-search-toggle").length&&e("#customize-info .accordion-section-title").append(t()),t=n.template("customify-search-form"),0===e("#customize-info "+c).length&&e("#customize-info .customize-panel-description").after(t())},f=function(){var t=e(c);t.hasClass("open")?(t.removeClass("open"),t.slideUp("fast"),p()):(e(".customize-panel-description").removeClass("open"),e(".customize-panel-description").slideUp("fast"),t.addClass("open"),t.slideDown("fast"),e(s).focus())},h=function(t){var n=this.getAttribute("data-section"),c=i.section(n);o.removeClass("search-found"),document.getElementById("customify-search-results").innerHTML="",e(s).focus(),c.expand()},p=function(){o.removeClass("search-found"),document.getElementById("customify-search-results").innerHTML="",document.getElementById("customify-customizer-search-input").value="",e(s).focus()},i.bind("ready",r),{init:r}))}(jQuery,customify,wp),(this.sm=this.sm||{})["customizerSearch.min"]={}}();