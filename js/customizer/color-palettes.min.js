window.customify=window.customify||parent.customify||{},function(e,t,n){var o=["sm_accent_color_switch_master","sm_accent_color_select_master","sm_text_color_switch_master","sm_text_color_select_master"];void 0===t.colorPalettes&&(t.colorPalettes={}),_.extend(t.colorPalettes,function(){const s=n.customize;let i;const c={},r="#_customize-input-sm_dark_color_switch_slider_control",l="#_customize-input-sm_dark_color_select_slider_control",a="#_customize-input-sm_dark_color_primary_slider_control",d="#_customize-input-sm_dark_color_secondary_slider_control",u="#_customize-input-sm_dark_color_tertiary_slider_control",f=[r,l,a,d,u].join(", ");let h=!1;const m=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function g(e){return isNaN(e)?"00":m[(e-e%16)/16]+m[e%16]}function p(e){return"#"+g(e[0])+g(e[1])+g(e[2])}function v(e){return p(S(e.hue,e.saturation,e.lightness))}function y(e){let t=0,n=0,o=0,s=0;/^#([A-Fa-f0-9]{3,4}){1,2}$/.test(e)&&(3===(e=e.substring(1).split("")).length&&(e=[e[0],e[0],e[1],e[1],e[2],e[2],"F","F"]),4===e.length&&(e=[e[0],e[0],e[1],e[1],e[2],e[2],e[3],e[3]]),t=parseInt([e[0],e[1]].join(""),16),n=parseInt([e[2],e[3]].join(""),16),o=parseInt([e[4],e[5]].join(""),16),s=parseInt([e[6],e[7]].join(""),16));const i=k(t,n,o);return{red:t,green:n,blue:o,alpha:s,hue:i[0],saturation:i[1],lightness:i[2],luma:.2126*t+.7152*n+.0722*o}}function k(e,t,n){e/=255,t/=255,n/=255;const o=Math.max(e,t,n),s=Math.min(e,t,n);let i,c,r=(o+s)/2;if(o==s)i=c=0;else{const l=o-s;switch(c=r>.5?l/(2-o-s):l/(o+s),o){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return[i,c,r]}const b=()=>{_.each(t.colorPalettes.masterSettingIds,(function(e){const t=s(e);if(void 0!==t){const n=t();c[e]=O(n)}}))},F=e=>c[e],C=function(){var e=t.colorPalettes.masterSettingIds.concat(o);_.each(e,(function(e){if(void 0!==i[e]){const n=i[e],c=s(e);_.isUndefined(n.connected_fields)||(t.colorPalettes.connectedFieldsCallbacks[e]=function(e,t){return function(n,i){const c=_.includes(o,t)?n:F(t);_.each(e.connected_fields,(function(e){if(_.isUndefined(e)||_.isUndefined(e.setting_id)||!_.isString(e.setting_id))return;const t=s(e.setting_id);_.isUndefined(t)||t.set(c)})),G();const r=s(t+"_final");_.isUndefined(r)||(_.isUndefined(e.connected_fields)||_.isEmpty(e.connected_fields)?r.set(""):r.set(c))}}(n,e),c.bind(t.colorPalettes.connectedFieldsCallbacks[e]),_.each(n.connected_fields,(function(e){const n=e.setting_id,o=s(n);void 0!==o&&(t.colorPalettes.connectedFieldsCallbacks[n]=M,o.bind(t.colorPalettes.connectedFieldsCallbacks[n]))})))}}))},P=function(){_.each(t.colorPalettes.connectedFieldsCallbacks,(function(e,t){s(t).unbind(e)})),t.colorPalettes.connectedFieldsCallbacks={}},w=e=>t.colorPalettes.variations.hasOwnProperty(e)?t.colorPalettes.variations[e]:"light",U=()=>{const e=[];return _.each(t.colorPalettes.masterSettingIds,(function(t){const n=s(t)();e.push(n)})),e};function S(e,t,n){let o,s,i;if(0==t)o=s=i=n;else{const c=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},r=n<.5?n*(1+t):n+t-n*t,l=2*n-r;o=c(l,r,e+1/3),s=c(l,r,e),i=c(l,r,e-1/3)}return[Math.round(255*o),Math.round(255*s),Math.round(255*i)]}function j(e,t,n,o){return t[e]*(1-o)+n[e]*o}function I(e,t,n){return e*(1-n)+t*n}const O=(t,n)=>{n=void 0===n?e('[name*="sm_palette_filter"]:checked').val():n;let o=y(t);const s=U();if("vivid"===n)return o=S(o.hue,I(o.saturation,1,.5),o.lightness),console.log(t,p(o)),p(o);if("warm"===n&&t!==s[0]){let e=y("#704214");return e.saturation=j("saturation",e,o,1),e.lightness=j("lightness",e,o,1),e=y(v(e)),o.saturation=.75*o.saturation,o=y(v(o)),c=e,r=(r=.75)||.5,(i=o).red=parseInt(c.red*r+i.red*(1-r),10),i.green=parseInt(c.green*r+i.green*(1-r),10),i.blue=parseInt(c.blue*r+i.blue*(1-r),10),o=y(p([i.red,i.green,i.blue])),o.lightness=j("lightness",o,y(o.lightness>.5?"#FFF":"#000"),.2),v(o)}var i,c,r;if("softer"===n)return o.saturation=j("saturation",o,y("#FFF"),.3),o.lightness=j("lightness",o,y("#FFF"),.1),v(o);if("pastel"===n)return o.saturation=j("saturation",o,y("#FFF"),.6),o.lightness=j("lightness",o,y("#FFF"),.2),v(o);if("greyish"===n)return o=S(o.hue,I(o.saturation,0,.8),o.lightness),p(o);if("clarendon"===n)return t===s[0]||t===s[1]||t===s[2]?(o=S(o.hue,I(o.saturation,1,.3),o.lightness),console.log(t,p(o)),p(o)):(t!==s[3]&&t!==s[4]&&t!==s[5]||(o.lightness=j("lightness",o,y("#000"),.4)),t!==s[6]&&t!==s[7]&&t!==s[8]||(o.lightness=j("lightness",o,y("#FFF"),.4)),console.log(t,v(o)),v(o));if("cold"===n&&t!==s[0]){const e=.55;o.saturation=j("saturation",o,y("#FFF"),.4),o.hue=(o.hue-e)/18+e,o=y(v(o));const t=k(o.red,o.green,o.blue);return o.hue=t[0],o.saturation=I(t[1],1,.1),o.lightness=j("lightness",o,y(o.lightness>.5?"#FFF":"#000"),.2),v(o)}return"dumb"===n?t===s[1]||t===s[2]?(o=y(s[0]),o.lightness=j("lightness",o,y("#000"),.2),o.saturation=j("saturation",o,y("#000"),.2),t===s[2]&&(o.lightness=j("lightness",o,y("#000"),.2),o.saturation=j("saturation",o,y("#000"),.2)),v(o)):(o.hue=y(s[0]).hue,v(o)):"mayfair"===n?t===s[1]||t===s[2]?(o=y(s[0]),o.hue=(o.hue+.05)%1,t===s[2]&&(o.hue=(o.hue+.05)%1),v(o)):(o.hue=y(s[0]).hue,v(o)):"sierra"===n?t===s[1]||t===s[2]?(o=y(s[0]),o.hue=(o.hue+.95)%1,t===s[2]&&(o.hue=(o.hue+.95)%1),v(o)):(o.hue=y(s[0]).hue,v(o)):t},x=function(){_.each(t.colorPalettes.masterSettingIds,(function(t){e(".c-color-palette").find(".sm-color-palette__color."+t).css("color",F(t))}))},z=function(){_.each(t.colorPalettes.masterSettingIds,(function(t){const n=s(t)();e(".c-color-palette").find(".sm-color-palette__color."+t).css("color",n)}))},N=function(){e(this).trigger("customify:preset-change"),b(),W()},J=_.debounce(()=>{let n=e();_.each(t.colorPalettes.masterSettingIds,(function(t){if(void 0!==i[t]){const o=i[t];_.isUndefined(o.connected_fields)||_.each(o.connected_fields,(function(t){const o=t.setting_id.match(/\[(.*?)\]/);if(o){const t=o[1],s=e(".customize-control-color").filter('[id*="'+t+'"]').find(".wp-color-picker");n=n.add(s)}}))}})),n.iris({palettes:U()})},30),M=_.debounce(()=>{const n=[];let o;_.each(t.colorPalettes.masterSettingIds,(function(e){let t=i[e].connected_fields;const o=s(e)();let c=!1;_.isUndefined(t)||Array.isArray(t)||(t=Object.keys(t).map((function(e){return t[e]}))),!_.isUndefined(t)&&t.length&&(_.each(t,(function(e){const t=e.setting_id,n=s(t);if(void 0!==n){const e=n();"string"==typeof e&&e.toLowerCase()!==O(o).toLowerCase()&&(c=!0)}})),c&&n.push(e))})),o="."+n.join(", ."),e(".c-color-palette .color").removeClass("altered"),n.length&&e(".c-color-palette .color").filter(o).addClass("altered")},30),D=_.debounce(()=>{const n=[];let o;_.each(t.colorPalettes.masterSettingIds,(function(e){const t=i[e].connected_fields;_.isUndefined(t)||_.isEmpty(t)||n.push(e)})),o=_.isEmpty(n)?"*":"."+n.join(", ."),e(".sm-palette-filter .color").addClass("hidden").filter(o).removeClass("hidden"),e(".sm-color-palette__color").addClass("hidden").filter(o).removeClass("hidden"),e(".js-color-palette .palette__item").addClass("hidden").filter(o).removeClass("hidden")},30),E=()=>{M(),D(),J(),x()},A=(e,t)=>{const n=JSON.parse(JSON.stringify(e)),o=JSON.parse(JSON.stringify(e));return _.each(t,(function(e,t){if(void 0!==n[t]){let s=[];e instanceof Array&&_.each(e,(function(e){let t;_.isUndefined(o[e].connected_fields)&&(o[e].connected_fields=[]),t=Object.values(o[e].connected_fields),s=s.concat(t)})),n[t].connected_fields=Object.keys(s).map((function(e){return s[e]}))}})),_.clone(n)},L=(e,t,n,o)=>{const s=_.clone(e);if(!_.isUndefined(s[n])&&!_.isUndefined(s[t])){_.isUndefined(s[t].connected_fields)&&(s[t].connected_fields=[]),_.isUndefined(s[n].connected_fields)&&(s[n].connected_fields=[]);const e=Object.values(s[t].connected_fields),i=Object.values(s[n].connected_fields).concat(e),c=Math.round(o*i.length);let r=i.slice(0,c);const l=i.slice(c);r=Object.keys(r).map((function(e){return r[e]})),r=Object.keys(r).map((function(e){return r[e]})),s[n].connected_fields=r,s[t].connected_fields=l}return s},B=()=>{let n=JSON.parse(JSON.stringify(t.settingsClone));const c=e('[name*="sm_color_diversity"]'),f=e('[name*="sm_coloration_level"]'),h=!!c.length,m=void 0!==c.filter(":checked").data("default"),g=!h||m,p=!!f.length,v=void 0!==e('[name*="sm_coloration_level"]:checked').data("default"),y=!p||v,k=h?e('[name*="sm_color_diversity"]:checked').val():s("sm_color_diversity")();if(!g||!y){const t=e(r).val()/100,o=e(l).val()/100,s=e(a).val()/100,i=e(d).val()/100,c=e(u).val()/100;n=L(n,"sm_dark_primary","sm_color_primary",s),n=L(n,"sm_dark_secondary","sm_color_secondary",i),n=L(n,"sm_dark_tertiary","sm_color_tertiary",c),n=L(n,"sm_text_color_switch_master","sm_accent_color_switch_master",t),n=L(n,"sm_text_color_select_master","sm_accent_color_select_master",o);const _=w("color_diversity_low");n=A(n,_),"medium"===k&&(n=L(n,"sm_color_primary","sm_color_secondary",.5)),"high"===k&&(n=L(n,"sm_color_primary","sm_color_secondary",.67),n=L(n,"sm_color_secondary","sm_color_tertiary",.5))}const b=e('[name*="sm_shuffle_colors"]:checked').val();if("default"!==b){const e=w("shuffle_"+b);n=A(n,e)}if("on"===e('[name*="sm_dark_mode_control"]:checked').val()){const e=w("dark");n=A(n,e)}var F=t.colorPalettes.masterSettingIds.concat(o);_.each(F,(function(e){i[e]=n[e]}))},Q=()=>{const n=e('[name*="sm_coloration_level"]:checked').val();if(void 0!==e('[name*="sm_coloration_level"]:checked').data("default")){const n=["sm_dark_color_primary_slider","sm_dark_color_secondary_slider","sm_dark_color_tertiary_slider"];_.each(n,(function(n){const o=t.config.settings[n];s(n).set(o.default),e("#_customize-input-"+n+"_control ").val(o.default)}))}else{const t=parseFloat(n);e(f).val(t)}W()},W=()=>{var e;B(),P(),C(),E(),e=t.colorPalettes.masterSettingIds.concat(o),_.each(e,(function(e){const t=s(e);if(void 0!==t){let n=i[e];const c=_.includes(o,e)?t():F(e);_.each(n.connected_fields,(function(e){if(_.isUndefined(e)||_.isUndefined(e.setting_id)||!_.isString(e.setting_id))return;const t=s(e.setting_id);_.isUndefined(t)||t.set(c)}));const r=s(e+"_final");_.isUndefined(r)||(_.isUndefined(n.connected_fields)||_.isEmpty(n.connected_fields)?r.set(""):r.set(c))}}))},$=t=>{const n=!!e(".c-color-palette .color.altered").length;let o=!0;return n&&(o=confirm("One or more fields connected to the color palette have been modified. By changing the palette variation you will lose changes to any color made prior to this action.")),!(n&&!o)&&("function"==typeof t&&t(),!0)},q=()=>{const n=e(".c-color-palette__control"),o=(()=>{const e=s("sm_color_palette_variation");if(_.isUndefined(e))return"light";const n=e();return t.colorPalettes.variations.hasOwnProperty(n)?n:"light"})();n.removeClass("active"),n.filter(".variation-"+o).addClass("active"),e(document).on("click",".js-color-palette input",(function(e){$(N.bind(this))||e.preventDefault()})),e('[for*="sm_palette_filter"], [for*="sm_coloration_level"], [for*="sm_color_diversity"], [for*="sm_shuffle_colors"], [for*="sm_dark_mode"]').on("click",(function(e){$()||e.preventDefault()})),e(f).on("change",W),e('[name*="sm_coloration_level"]').on("change",Q),e('[name*="sm_color_diversity"]').on("change",W),e('[name*="sm_shuffle_colors"]').on("change",W),e('[name*="sm_dark_mode"]').on("change",W),e('[name*="sm_palette_filter"]').on("change",()=>{b(),W()})},G=_.debounce(()=>{e(".sm-palette-filter").each((function(){e(this).find("input").each((function(t,n){const o=e(n),i=o.next("label"),c=o.val();i.find(".sm-color-palette__color").each((function(t,n){const o=e(n),i=o.data("setting"),r=s(i)();o.css("color",O(r,c))}))}))}))},30);return s.bind("ready",(function(){i=s.settings.settings,h||(_.each(t.colorPalettes.masterSettingIds,(function(e){c[e]=""})),void 0===t.settingsClone&&(t.settingsClone=e.extend(!0,{},i)),void 0===t.colorPalettes.connectedFieldsCallbacks&&(t.colorPalettes.connectedFieldsCallbacks={}),h=!0),(()=>{const t=e(".c-color-palette"),n=t.find(".c-color-palette__fields").find("input");if(!t.length)return;const o=t.find(".sm-color-palette__color");o.each((i,r)=>{const l=e(r),a=l.data("setting"),d=n.filter("."+a),_=s(a);if(l.data("target",d),l.hasClass("js-no-picker"))return;d.iris({change:(e,n)=>{const o=n.color.toString();l.css("color",O(o)),c[a]=O(o),_.set(o),"external"!==e.originalEvent.type&&t.find(".sm-color-palette__color."+a).removeClass("altered"),J()}}),l.find(".iris-picker").on("click",(function(e){e.stopPropagation(),e.preventDefault()}));const u=()=>{o.not(l).each((function(t,n){e(n).data("target").not(d).hide()})),d.show().focus()};l.on("click",e=>{e.stopPropagation(),e.preventDefault(),d.is(":visible")?(d.iris("hide"),d.hide(),o.removeClass("active inactive")):l.is(".altered")?$(u):u()}),d.on("click",e=>{e.stopPropagation(),e.preventDefault()}),d.on("focus",n=>{o.not(l).addClass("inactive").removeClass("active"),l.addClass("active").removeClass("inactive"),o.not(l).each((function(t,n){e(n).data("target").iris("hide")}));const s=d.next(".iris-picker"),i=t.find(".c-color-palette__colors").outerWidth(),c=o.filter(":visible"),r=c.index(l);s.css("left",(i-200)*r/(c.length-1)),z(),d.iris("show")}),d.on("focusout",e=>{x()})}),e("body").on("click",(function(){o.removeClass("active inactive"),o.each((function(t,n){const o=e(n).data("target");e(n).hasClass("js-no-picker")||o.iris("hide"),o.hide()}))}))})(),B(),b(),P(),C(),E(),G(),q()})),{}}())}(jQuery,customify,wp);