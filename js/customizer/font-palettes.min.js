window.customify=window.customify||parent.customify||{},function(t,e,n,i){void 0===e.fontPalettes&&(e.fontPalettes={}),_.extend(e.fontPalettes,function(){const i=n.customize;let s;const o=function(){_.each(e.fontPalettes.masterSettingIds,(function(t){if(void 0!==s[t]){const n=s[t],o=i(t);void 0!==n.connected_fields&&(e.fontPalettes.connectedFieldsCallbacks[t]=function(t,n){return function(n,s){_.each(t.connected_fields,(function(t){if(_.isUndefined(t)||_.isUndefined(t.setting_id)||!_.isString(t.setting_id))return;const s=i(t.setting_id);if(_.isUndefined(s))return;const o={},a=n;if(void 0!==a.reset){const n=t.setting_id,i=e.config.settings[n].default;_.isUndefined(s)||_.isEmpty(i)||(o.font_family=i.font_family,o.font_size=i.font_size,o.line_height=i.line_height,o.letter_spacing=i.letter_spacing,o.text_transform=i.text_transform,o.font_variant=i.font_variant)}if(void 0!==a.font_family&&(o.font_family=a.font_family),!_.isEmpty(o.font_family)){if(void 0!==t.font_size&&!1!==t.font_size){if(o.font_size=e.fontFields.standardizeNumericalValue(t.font_size),!isNaN(o.font_size.value)){let t=1;void 0!==a.font_size_multiplier&&(t=parseFloat(a.font_size_multiplier),t<=0&&(t=1)),o.font_size.value=r(parseFloat(o.font_size.value)*t,e.fonts.floatPrecision)}if(void 0!==a.font_styles_intervals&&_.isArray(a.font_styles_intervals)&&a.font_styles_intervals.length>0){let n=0;for(;n<a.font_styles_intervals.length-1&&void 0!==a.font_styles_intervals[n].end&&a.font_styles_intervals[n].end<=t.font_size.value;)n++;if(_.isEmpty(a.font_styles_intervals[n].font_variant)||(o.font_variant=a.font_styles_intervals[n].font_variant),_.isEmpty(a.font_styles_intervals[n].letter_spacing)||(o.letter_spacing=e.fontFields.standardizeNumericalValue(a.font_styles_intervals[n].letter_spacing)),_.isEmpty(a.font_styles_intervals[n].text_transform)||(o.text_transform=a.font_styles_intervals[n].text_transform),!isNaN(o.font_size.value)){let t=1;void 0!==a.font_styles_intervals[n].font_size_multiplier&&(t=parseFloat(a.font_styles_intervals[n].font_size_multiplier),t<=0&&(t=1)),o.font_size.value=r(parseFloat(o.font_size.value)*t,e.fonts.floatPrecision)}}if(void 0!==a.font_size_to_line_height_points&&_.isArray(a.font_size_to_line_height_points)){const t=regression.logarithmic(a.font_size_to_line_height_points,{precision:e.fonts.floatPrecision}).predict(o.font_size.value)[1];o.line_height=e.fontFields.standardizeNumericalValue(t)}}s.set(o)}}))}}(n),o.bind(e.fontPalettes.connectedFieldsCallbacks[t]))}}))},a=()=>{_.each(e.fontPalettes.masterSettingIds,(function(t){if(void 0!==s[t]){const n=s[t],o=i(t);void 0!==n.connected_fields&&void 0!==e.fontPalettes.connectedFieldsCallbacks[t]&&o.unbind(e.fontPalettes.connectedFieldsCallbacks[t]),delete e.fontPalettes.connectedFieldsCallbacks[t]}})),o()},l=function(){d();const e=t(this).data("fonts_logic");_.isUndefined(e)||t.each(e,(function(t,e){f(t,e)})),t(this).trigger("customify:preset-change")},f=function(t,e){const n=i(t);_.isUndefined(n)||n.set(e)},c=()=>{t('#sub-accordion-section-sm_font_palettes_section .sm-tabs__item[data-target="advanced"]').css("visibility","hidden")},d=()=>{t('#sub-accordion-section-sm_font_palettes_section .sm-tabs__item[data-target="advanced"]').css("visibility","visible")},r=function(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n};return i.bind("ready",()=>{s=i.settings.settings,void 0===e.settingsClone&&(e.settingsClone=t.extend(!0,{},s)),void 0===e.fontPalettes.connectedFieldsCallbacks&&(e.fontPalettes.connectedFieldsCallbacks={}),a(),t('.js-font-palette input[name="sm_font_palette"]').on("change",l),t(".js-font-palette .customize-inside-control-row").on("click",(function(e){let n=t(e.target).siblings("input");if(n.length||(n=t(e.target).children("input")),n.length&&n.prop("checked")){const e=n.data("fonts_logic");_.isUndefined(e)||t.each(e,(function(t,e){const n=i(t);_.isUndefined(n)||(n.set({}),f(t,e))})),n.trigger("customify:preset-change")}}));const n=i("sm_font_palette");"function"==typeof n&&""===n()&&c()}),{}}())}(jQuery,customify,wp,document);