window.customify=window.customify||parent.customify||{},function(t,e,n){void 0===e.fontFields&&(e.fontFields={}),_.extend(e.fontFields,function(){const i=".font-options__wrapper",o=".customify_font_values",a=".customify_font_weight";let s,l;const c=n.customize,u={},f={},d=function(e,n=!1,a=""){if(e.length&&(t(e).data("touched",!1),t(e).on("input change",(function(e,n){if(void 0!==n&&"customify"===n);else{const n=t(e.target).closest(i),a=t(n.children(o)).data("customize-setting-link");t(e.target).data("touched",!0),m(n,a)}})),!0===n)){const n={};_.isEmpty(a)||(n.placeholder=a),t(e).select2(n)}},r=function(){const e=t("#customize-controls .js-font-option-toggle");e.on("click",(function(){const n=t(this);!0===n.prop("checked")&&e.not(n).prop("checked",!1)})),t("#customize-controls .customize-panel-back, #customize-controls .customize-section-back").on("click",(function(){e.prop("checked",!1)}))},v=function(e,n){const i=n.find(".font-options__head .font-options__font-title");let o=e.family;"string"==typeof e.family_display&&e.family_display.length&&(o=e.family_display),t(i).html(o)},p=function(e,n){const i=void 0!==e.variants?e.variants:[],o=n.find(a),s=o.val()?o.val():"",c=[];if(o.val(null).empty(),o.hasClass("select2-hidden-accessible")&&o.select2("destroy"),o.data("touched",!1),void 0===i||Object.keys(i).length<2)return o.parent().hide(),o.parent().prev("label").hide(),void o.data("disabled",!0);c.push({id:"",text:l}),t.each(i,(function(t,e){let n={id:e,text:e};s==e&&(n.selected=!0),c.push(n)})),o.select2({data:c}),o.parent().show(),o.parent().prev("label").show(),o.data("disabled",!1)},m=function(e,n){if(!0===u[n])return;if(!0===f[n])return;u[n]=!0;const i=e.find(".font-options__options-list").find("[data-value_entry]"),o=c(n),a=o(),s=_.isEmpty(a)?{}:t.extend(!0,{},a);i.each((function(e,n){const i=t(n),o=i.data("value_entry");let a=i.val();if(!_.isUndefined(o)&&!i.data("disabled")&&(i.data("touched")||_.isUndefined(s[o]))){if("font_family"===o){const e=t(n.options[n.selectedIndex]).data("src");e?s.src=e:delete s.src}_.isUndefined(a)||_.isNull(a)||""===a?delete s[o]:(_.includes(["letter_spacing","line_height","font_size"],o)&&(a=y(a,n,!1)),s[o]=a)}})),delete s.variants,delete s.subsets;const l=b(s.font_family);void 0!==s.font_variant&&void 0!==l.variants&&Object.keys(l.variants).length>0?(s.font_variant=String(s.font_variant),_.includes(l.variants,s.font_variant)||delete s.font_variant):delete s.font_variant,o.set(s),u[n]=!1},h=function(n,i,o){if(!0===f[o])return;f[o]=!0;t(n).find(".font-options__options-list").find("[data-value_entry]").each((function(n,o){const a=t(o),s=a.data("value_entry");if(void 0!==s&&""!==s&&void 0!==i[s]){if(_.includes(["letter_spacing","line_height","font_size"],s)){const t=y(i[s],o);""!==t.unit&&(a.data("value_unit",t.unit),_.isEmpty(a.attr("unit"))&&a.attr("unit",t.unit));const n=16,l=a.attr("unit").trim().toLowerCase(),c=a.data("value_unit").trim().toLowerCase();l!=c&&(_.includes(["em","rem"],c)&&"px"===l?t.value=k(t.value*n,e.fonts.floatPrecision):_.includes(["em","rem"],l)&&"px"===c&&(t.value=k(t.value/n,e.fonts.floatPrecision))),a.attr("min")&&a.attr("min")>t.value&&a.attr("min",t.value),a.attr("max")&&a.attr("max")<t.value&&a.attr("max",t.value),a.val(t.value)}else a.val(i[s]);a.data("touched",!1),a.trigger("change",["customify"])}})),f[o]=!1},y=function(e,n=!1,i=!0){const o={value:!1,unit:!1};if(_.includes(["","false",!1],e))return o;if(isNaN(e)){if(void 0!==e.value)o.value=e.value,void 0!==e.unit&&(o.unit=e.unit);else if(void 0!==e[0])o.value=e[0],void 0!==e[1]&&(o.unit=e[1]);else if("string"==typeof e){const t=e.match(/^([\d.\-+]+)(.+)/i);null!==t&&void 0!==t[1]?(o.value=t[1],_.isEmpty(t[2])||(o.unit=t[2])):o.value=e}}else o.value=e;if(!1!==n&&(!1===o.unit||_.isEmpty(o.unit))){let e="";const a=t(n);i?_.isEmpty(a.data("value_unit"))?_.isEmpty(a.attr("unit"))||(e=a.attr("unit")):e=a.data("value_unit"):_.isEmpty(a.attr("unit"))?_.isEmpty(a.data("value_unit"))||(e=a.data("value_unit")):e=a.attr("unit"),o.unit=e}return isNaN(o.value)||(o.value=parseFloat(o.value)),o},g=function(t){let n="system_font";return void 0!==e.fonts.cloud_fonts[t]?n="cloud_font":void 0!==e.fonts.theme_fonts[t]?n="theme_font":void 0!==e.fonts.google_fonts[t]&&(n="google_font"),n},b=function(t,n=!1){switch(!1===n&&(n=g(t)),n){case"theme_font":return e.fonts.theme_fonts[t];case"cloud_font":return e.fonts.cloud_fonts[t];case"google_font":return e.fonts.google_fonts[t];case"system_font":if(void 0!==e.fonts.system_fonts[t])return e.fonts.system_fonts[t]}return!1},k=function(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n};return{init:function(){s=e.l10n.fonts.familyPlaceholderText,l=e.l10n.fonts.variantAutoText;const n=t(".customify_font_family");void 0!==c.settings.google_fonts_opts&&n.each((function(e,n){const i=t(n).find(".google-fonts-opts-placeholder").first();if(i){i.replaceWith(c.settings.google_fonts_opts);const e=t(n).data("active_font_family");void 0!==e&&t(n).val(e)}})),n.select2({placeholder:s}),n.on("change",(function(e,n){const a=e.target.value,s=t(e.target).closest(i),l=t(s.children(o)).data("customize-setting-link"),u=(c(l),b(a));v(u,s),p(u,s),void 0!==n&&"customify"===n||(t(e.target).data("touched",!0),m(s,l))})),n.each((function(e,n){const a=t(n).closest(i),s=t(a.children(o)).data("customize-setting-link");c(s).bind((function(t,e){u[this.id]||h(a,t,this.id)}))})),d(t(a),!0),d(n.parents(i).find("select").not("select[class*=' select2'],select[class^='select2']"),!1),d(n.parents(i).find("input[type=range]"),!1),r()},selfUpdateValue:m,standardizeNumericalValue:y,determineFontType:g,getFontDetails:b,convertFontVariantToFVD:function(t){let e,n="n";switch(-1!==(t=String(t)).indexOf("italic")?(n="i",t=t.replace("italic","")):-1!==t.indexOf("oblique")&&(n="o",t=t.replace("oblique","")),t){case"100":e="1";break;case"200":e="2";break;case"300":e="3";break;case"500":e="5";break;case"600":e="6";break;case"700":case"bold":e="7";break;case"800":e="8";break;case"900":e="9";break;default:e="4"}return n+e},round:k}}())}(jQuery,customify,wp);